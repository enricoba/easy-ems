<div class="panel-group" id="accordion">
    <!--Hardware-->
    <div class="panel panel-default">
        <!--heading-->
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Hardeware Setup</a>
                <span class="fa {{ session_config['icon'] }}" style="float: right; color: {{ session_config['color'] }}; display: {{ session_config['display'] }}"></span>
            </h4>
        </div>
        <!--text/body-->
        <div class="panel-collapse collapse in" id="collapse1">
            <div class="panel-body">
                <div class="form-group">
                    <form role="form" method="post" action="{{ url_for('config') }}" onsubmit="return validateConfig()">
                        <!-- DS18B20 button -->
                        <button type="button" onclick="set_btn(this, ds18b20_cb)" style="width: 100px" class="btn btn-default">DS18B20</button>
                        <label><input class="form-control" type="checkbox" name="ds18b20_cb" style="display: none"></label>

                        <!-- DS18B20 alert -->
                        <div class="alert {{ ds18b20_vars['status'] }} fade in" style="display: {{ ds18b20_vars['display'] }}; margin: 5px 0 5px 0">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            <strong>{{ ds18b20_vars['msg_1'] }}</strong>{{ ds18b20_vars['msg_2'] }}
                        </div>

                        <!-- box with DS18B20 sensors -->
                        <ul class="list-group" style="display: {{ ds18b20_vars['list'] }}; margin-top: 5px">
                            {% for key, value in ds18b20_table.iteritems() %}
                                <li class="list-group-item"><span class="badge" style="background-color: green">{{ value }} °C</span>{{ key }}</li>
                            {% endfor %}
                        </ul>

                        <!-- navigation -->
                        <ul class="pager">
                            <li><button type="submit" name="hardware-next" style="width: 100px" class="btn btn-success">Next</button></li>
                        </ul>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--Software-->
    <div class="panel panel-default">
        <!--heading-->
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="{{ toggle }}" data-parent="#accordion" href="#collapse2">Configuration</a>
                <span class="fa {{ session_config_sw['icon'] }}" style="float: right; color: {{ session_config_sw['color'] }}; display: {{ session_config_sw['display'] }}"></span>
            </h4>
        </div>
        <!--text/body-->
        <div class="panel-collapse collapse" id="collapse2">
            <div class="panel-body">
                <div class="form-group">
                    <form role="form" method="post" action="{{ url_for('config') }}" onsubmit="return validateSoftware(this)">
                        <!-- DS18B20 sensors -->
                        <div class="panel-group" style="display: {{ ds18b20_vars['list'] }}; margin-bottom: 5px">
                            <div class="panel panel-default">
                                <!-- header -->
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#collapse3">DS18B20</a>
                                    </h4>
                                </div>
                                <!-- body -->
                                <div id="collapse3" class="panel-collapse collapse in">
                                    <ul class="list-group">
                                        {% for key, value in ds18b20_table.iteritems() %}
                                            <li class="list-group-item"><span class="badge" style="background-color: green">{{ value }} °C</span>{{ key }}
                                            <input {% if session_config_sw['final'] == 1 %} disabled {% endif %} type="text" placeholder="{% if session_config_sw['final'] == 1%} {{ user_names[key] }} {% else %} user defined name {% endif %}" name="{{ key }}" class="form-control input-sm" style="margin-top: 5px"></li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Timing -->
                        <div class="row" style="margin-top: 10px">
                            <!-- Duration -->
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="duration">Duration (s):</label>
                                    <input {% if session_config_sw['final'] == 1%} disabled {% endif %} type="number" name="duration" min="10" placeholder="{% if session_config_sw['final'] == 1 %} {{ duration }} {% else %} duration in seconds {% endif %}" class="form-control" id="duration">
                                </div>
                            </div>
                            <!-- Interval -->
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="interval">Interval (s):</label>
                                    <input {% if session_config_sw['final'] == 1%} disabled {% endif %} type="number" name="interval" min="2" placeholder="{% if session_config_sw['final'] == 1 %} {{ interval }} {% else %} interval in seconds {% endif %}" class="form-control" id="interval">
                                </div>
                            </div>
                        </div>

                        <!-- navigation -->
                        <ul class="pager">
                            <li><button type="button" onclick="getBack()" name="software-back" style="width: 100px" class="btn btn-primary">Back</button></li>
                            <li><button type="submit" name="software-next" style="width: 100px" class="btn btn-success">Next</button></li>
                        </ul>
                        <!-- button -->

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    function set_btn(btn, cb) {
        var status = btn.className;
        if (status === "btn btn-default") {
            btn.className = "btn btn-primary";
            cb.checked = true;
        } else {
            btn.className = "btn btn-default";
            cb.checked = false;
        }
    }

    function validateConfig() {
        var flag = '{{ session_config['final'] }}';
        if (flag == 1) {
            $("#collapse1").collapse('toggle');
            $("#collapse2").collapse('toggle');
            return false;
        } else {
            return true;
        }
    }

    function getBack() {
        $("#collapse2").collapse('toggle');
        $("#collapse1").collapse('toggle');
    }

    <!-- potentielle FUnotion für Hardware check -->
    function validateHardware(form) {
        var ds18b20 = form["ds18b20_cb"].value;

        if (ds18b20 == true) {
            sweetAlert({
                    title: "Oops!",
                    text: "Duration must be set.",
                    type: "error"
                });
                return false;
        }
    }

    function validateSoftware(form) {
        var x = form["duration"].value;
        var y = form["interval"].value;
        var z = parseInt({{ session_config_sw['final'] }});

        if (z == 1) {
            return true;
        } else {
            if (x == null || x == "") {
                sweetAlert({
                    title: "Oops!",
                    text: "Duration must be set.",
                    type: "error"
                });
                return false;
            }
            if (y == null || y == "") {
                sweetAlert({
                    title: "Oops!",
                    text: "Interval must be set.",
                    type: "error"
                });
                return false;
            }
            if (parseInt(y) > parseInt(x)) {
                sweetAlert({
                    title: "Oops!",
                    text: "Duration must be greater interval.",
                    type: "error"
                });
                return false;
            }
        }
    }
</script>
